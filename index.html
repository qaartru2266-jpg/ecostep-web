<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é’è¡Œ EcoStep - ä½ç¢³è£èª‰ç”Ÿæˆ</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* --- å…¨å±€ä¸æµ·æ´‹ä¸»é¢˜èƒŒæ™¯ --- */
        :root {
            --ocean-top: #e0f7fa;
            --ocean-bottom: #81d4fa;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --primary-blue: #0288d1;
            --deep-sea: #01579b;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(180deg, var(--ocean-top) 0%, var(--ocean-bottom) 100%);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden; /* é˜²æ­¢é±¼æ¸¸å‡ºå»äº§ç”Ÿæ¨ªå‘æ»šåŠ¨æ¡ */
        }

        /* --- è£…é¥°å…ƒç´  (é±¼ã€å†°å±±) --- */
        .decor-fish {
            position: absolute;
            width: 60px;
            top: 10%;
            left: -100px;
            opacity: 0.8;
            /* è®©é±¼æ¸¸èµ·æ¥çš„åŠ¨ç”» */
            animation: swim 15s linear infinite;
            pointer-events: none;
            z-index: 0; 
        }

        @keyframes swim {
            0% { left: -100px; transform: translateY(0); }
            50% { transform: translateY(20px); }
            100% { left: 110%; transform: translateY(-10px); }
        }

        .main-logo {
            width: 120px; /* æ ¹æ®ä½ çš„ Logo è°ƒæ•´å¤§å° */
            margin-bottom: 10px;
            z-index: 10;
        }

        h1 {
            color: var(--deep-sea);
            font-size: 1.6rem;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(255,255,255,0.5);
            z-index: 10;
        }

        /* --- è¾“å…¥å¡ç‰‡ (æ¯›ç»ç’ƒæ•ˆæœ) --- */
        .input-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px); /* æ¯›ç»ç’ƒæ ¸å¿ƒ */
            -webkit-backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            width: 100%;
            max-width: 360px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            z-index: 10;
        }

        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; color: var(--deep-sea); font-weight: bold; }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #b3e5fc;
            border-radius: 10px;
            font-size: 1rem;
            box-sizing: border-box;
            background: rgba(255,255,255,0.9);
            color: #333;
        }

        select:focus, input:focus {
            border-color: var(--primary-blue);
            outline: none;
            box-shadow: 0 0 8px rgba(2, 136, 209, 0.3);
        }

        .btn-generate {
            width: 100%;
            background: linear-gradient(90deg, #29b6f6, #0288d1);
            color: white;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(2, 136, 209, 0.3);
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(2, 136, 209, 0.4);
        }

        /* --- è¯ä¹¦/å¾½ç« é¢„è§ˆåŒºåŸŸ --- */
        #badge-container {
            display: none;
            flex-direction: column;
            align-items: center;
            margin-top: 10px;
            z-index: 10;
            width: 100%;
            max-width: 360px; /* é™åˆ¶å®½åº¦ï¼Œé˜²æ­¢æ‰‹æœºä¸Šæº¢å‡º */
        }

        /* è¯ä¹¦æœ¬ä½“æ ·å¼ */
        .badge-card {
            width: 320px;
            height: 500px;
            /* è¯ä¹¦èƒŒæ™¯ï¼šå¯ä»¥ç”¨å›¾ç‰‡ï¼Œè¿™é‡Œå…ˆç”¨æ¸å˜æ¨¡æ‹Ÿå†°å· */
            background: linear-gradient(160deg, #ffffff 0%, #e1f5fe 100%);
            border-radius: 20px;
            padding: 0; /* æ¸…ç©º paddingï¼Œä¾¿äºå¸ƒå±€ */
            box-sizing: border-box;
            text-align: center;
            position: relative;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            border: 5px solid white;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* è£å‰ªæ‰æº¢å‡ºçš„å›¾ç‰‡ */
        }

        /* è¯ä¹¦é¡¶éƒ¨çš„è£…é¥° */
        .badge-header {
            background-color: #0288d1;
            height: 80px;
            border-radius: 15px 15px 100% 100% / 0px 0px 30px 30px; /* å¼§å½¢åº•è¾¹ */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .badge-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .transport-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .t-icon {
            font-size: 24px; /* å¦‚æœç”¨Emoji */
            /* å¦‚æœç”¨å›¾ç‰‡ï¼šwidth: 40px; height: 40px; */
            background: #e1f5fe;
            padding: 8px;
            border-radius: 50%;
        }

        .participant-name {
            font-size: 34px;
            color: #01579b;
            font-weight: 800;
            margin: 5px 0 15px 0;
            letter-spacing: 2px;
        }

        .participant-id {
            color: #fff;
            background-color: #29b6f6;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* åº•éƒ¨å†°å±±è£…é¥° */
        .badge-footer-img {
            width: 100%;
            margin-top: auto; /* æ¨åˆ°åº•éƒ¨ */
        }
        
        .footer-text {
            position: absolute;
            bottom: 15px;
            width: 100%;
            color: #546e7a;
            font-size: 12px;
            text-align: center;
        }

        .download-hint { margin-top: 15px; color: #01579b; font-weight: bold;}
        
        .btn-download {
            background-color: #ffca28; /* é»„è‰²é†’ç›® */
            color: #3e2723;
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            margin-top: 10px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(255, 193, 7, 0.4);
            margin-bottom: 40px; /* ç•™å‡ºåº•éƒ¨ç©ºé—´ */
        }

    </style>
</head>
<body>

    <div style="font-size:40px; margin-bottom:10px;">ğŸŒŠ</div> 
    <h1>é’è¡Œ EcoStep è£èª‰ç”Ÿæˆ</h1>

    <img src="https://cdn-icons-png.flaticon.com/512/3065/3065780.png" class="decor-fish" style="top:15%; width:50px;">
    <img src="https://cdn-icons-png.flaticon.com/512/3065/3065780.png" class="decor-fish" style="top:25%; animation-delay: 2s; width: 40px; opacity: 0.6;">

    <div class="input-card">
        <div class="form-group">
            <label>ğŸ… å‚ä¸ç¼–å·</label>
            <select id="userId">
                <option value="01">ç¼–å· 01</option>
                <option value="02">ç¼–å· 02</option>
                <option value="03">ç¼–å· 03</option>
                <option value="04">ç¼–å· 04</option>
                <option value="05">ç¼–å· 05</option>
                <option value="06">ç¼–å· 06</option>
                <option value="07">ç¼–å· 07</option>
                <option value="08">ç¼–å· 08</option>
            </select>
        </div>

        <div class="form-group">
            <label>ğŸ‘¤ ä½ çš„åå­—</label>
            <input type="text" id="userName" placeholder="è¯·è¾“å…¥åå­—">
        </div>

        <div class="form-group">
            <label>ğŸ”‘ æ¿€æ´»ç¼–ç </label>
            <input type="text" id="activeCode" placeholder="è€å¸ˆç»™çš„ç¼–ç ">
        </div>

        <button class="btn-generate" onclick="generateBadge()">ç”Ÿæˆè¯ä¹¦</button>
        <div id="error-msg" style="color: red; margin-top: 10px; font-size: 0.9rem; display: none; text-align: center;">ç¼–ç é”™è¯¯ï¼Œè¯·é‡è¯•ï¼</div>
    </div>

    <div id="badge-container">
        <div class="badge-card" id="capture-area">
            
            <div class="badge-header">
                ä½ç¢³è¡ŒåŠ¨å®ˆæŠ¤è€…
            </div>
            
            <div class="badge-content">
                <div class="participant-name" id="display-name">æå°æ˜</div>
                <span class="participant-id" id="display-id">NO.01</span>

                <p style="color: #666; font-size: 14px; margin-top: 25px;">
                    ä½ åœ¨ EcoStep è®¡åˆ’ä¸­<br>æˆåŠŸè§£é”äº†ä»¥ä¸‹ä½ç¢³å‡ºè¡Œæˆå°±ï¼š
                </p>

                <div class="transport-icons">
                    <div class="t-icon">ğŸš¶</div>
                    <div class="t-icon">ğŸš²</div>
                    <div class="t-icon">ğŸšŒ</div>
                </div>

                <div style="font-size: 13px; color: #888; margin-top: 10px; padding: 0 20px; line-height: 1.5;">
                    æ„Ÿè°¢ä½ ä¸ºå‡å°‘ç¢³æ’æ”¾åšå‡ºçš„è´¡çŒ®ï¼<br>
                    åœ°çƒå› ä¸ºæœ‰ä½ è€Œæ›´è“ã€‚
                </div>
            </div>

            <img src="https://cdn-icons-png.flaticon.com/512/2663/2663046.png" style="width: 100%; height: 120px; object-fit: cover; opacity: 0.8; margin-top:auto;">
            
            <div class="footer-text">
                EcoStep Project 2026 Â· é’è¡Œè®¡åˆ’
            </div>
        </div>

        <div class="download-hint">ğŸ‰ ç”ŸæˆæˆåŠŸï¼å¿«ä¿å­˜å§</div>
        <button class="btn-download" onclick="downloadImage()">â¬‡ï¸ ä¿å­˜åˆ°ç›¸å†Œ</button>
    </div>

    <script>
        const CONFIG = {
            SECRET_CODE: "1234abcd" 
        };

        function generateBadge() {
            const idInput = document.getElementById('userId').value;
            const nameInput = document.getElementById('userName').value.trim();
            const codeInput = document.getElementById('activeCode').value.trim();
            const errorMsg = document.getElementById('error-msg');
            const container = document.getElementById('badge-container');

            if (codeInput !== CONFIG.SECRET_CODE) {
                errorMsg.style.display = 'block';
                errorMsg.innerText = "âŒ æ¿€æ´»ç¼–ç é”™è¯¯";
                container.style.display = 'none';
                return;
            }

            errorMsg.style.display = 'none';
            document.getElementById('display-id').innerText = "NO." + idInput;
            document.getElementById('display-name').innerText = nameInput ? nameInput : "ä½ç¢³å«å£«";

            container.style.display = 'flex';
            
            // ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œå†æ»šåŠ¨ï¼Œä½“éªŒæ›´å¥½
            setTimeout(() => {
                container.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function downloadImage() {
            const element = document.getElementById("capture-area");
            
            // ä¸ºäº†ä¿è¯æˆªå›¾æ¸…æ™°ï¼Œä¸´æ—¶æ”¾å¤§å®¹å™¨
            html2canvas(element, {
                scale: 3, // æ›´é«˜æ¸…
                useCORS: true, // å…è®¸è·¨åŸŸå›¾ç‰‡(ç”¨äº†åœ¨çº¿å›¾ç‰‡å¿…é¡»åŠ è¿™ä¸ª)
                backgroundColor: null
            }).then(canvas => {
                const link = document.createElement("a");
                link.download = "EcoStep-ä½ç¢³è¯ä¹¦.png";
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        }
    </script>
</body>
</html>